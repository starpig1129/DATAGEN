<!DOCTYPE html>
<html lang="zh-TW"> <!-- Changed lang to Traditional Chinese -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>多代理數據分析 UI</title> <!-- Changed title -->
    <link rel="stylesheet" href="css/style.css">
    <!-- Favicon links can be added here -->
</head>
<body>
    <!-- Main application layout container -->
    <div class="app-layout">

        <!-- Main content area -->
        <main class="app-main">
            <!-- Chat section -->
            <section class="chat">
                <!-- Chat messages display area -->
                <div class="chat__messages" id="chatMessages">
                    <!-- Messages will be dynamically added here by chat.js -->
                </div>
                <!-- Chat input and controls area -->
                <footer class="chat__input">
                    <!-- Loading indicator will be prepended here by main.js -->
                    <input class="chat__input-field" type="text" id="messageInput" placeholder="輸入您的訊息...">
                    <button class="chat__send-button" id="sendButton">發送</button>
                    <!-- Decision Buttons Container - Initially hidden via CSS -->
                    <div class="chat__decision-buttons" id="decision-buttons">
                        <button class="chat__decision-button chat__decision-button--regenerate" id="regenerate-button" data-decision="1">重新生成假設</button>
                        <button class="chat__decision-button chat__decision-button--continue" id="continue-button" data-decision="2">繼續研究</button>
                    </div>
                </footer>
            </section>
        </main>

        <!-- Sidebar area -->
        <aside class="app-sidebar">
            <!-- State display panel -->
            <section class="state-panel">
                <h2 class="state-panel__title">當前狀態</h2>
                <div class="state-panel__content" id="stateContent">
                    <!-- State items will be dynamically added here by state.js -->
                </div>
            </section>
            <!-- Files display panel -->
            <section class="files-panel">
                <h2 class="files-panel__title">數據儲存文件</h2>
                <div class="files-panel__content" id="filesContent">
                    <!-- File items will be dynamically added here by files.js -->
                </div>
            </section>
        </aside>

    </div> <!-- End of app-layout -->

    <!-- Load external libraries -->
    <!-- Ensure marked is loaded before our modules that might use it -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- Load DOMPurify for enhanced security (recommended) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.6/purify.min.js" integrity="sha512-H+rglffZ6f5gF7UJgvH4Naa+fGCgjrHKMgoFOGmcPTRwR6oILo5R+gtzNrpDp7iMV3udbymBVjkeZGNz1Em4rQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>


    <!-- Load the main application module -->
    <!-- This script will import other necessary modules (chat, state, files, config) -->
    <script type="module" src="js/main.js"></script>

</body>
</html>
